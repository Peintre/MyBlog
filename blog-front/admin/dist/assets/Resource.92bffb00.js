import{p as D}from"./common.10683f1a.js";import{ag as i,aj as z,o as g,Q as y,R as o,a as p,W as w,X as e,V as n,a7 as P,S as L,U as v}from"./@vue.9e9a2d45.js";import{_ as q}from"./index.ae6b5db7.js";import"./dayjs.68f6f475.js";import"./@babel.1ce85722.js";import"./axios.cdba3bd7.js";import"./form-data.d1f94bc2.js";import"./vue-router.b11bef48.js";import"./vuex.029ab250.js";import"./vuex-persistedstate.fa252374.js";import"./nprogress.8c2c2e00.js";import"./vue-axios.516efde1.js";import"./element-plus.e856da41.js";import"./lodash-es.1d9717e1.js";import"./@vueuse.15af719d.js";import"./@element-plus.b2728cca.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.f14f28ca.js";import"./@kangc.b9a0ef8b.js";import"./vue.a84c3055.js";import"./markdown-it-emoji.952032df.js";import"./@vuepress.3e7afe62.js";import"./markdown-it-container.512a5043.js";import"./highlight.js.6e93349b.js";import"./codemirror.59d98cc1.js";const A={created(){this.listResources()},data(){return{loading:!0,keywords:"",resourceList:[],addModule:!1,addResource:!1,resourceForm:{},moduleTitle:"",resourceTitle:""}},methods:{listResources(){this.axios.get("/api/resource/getAllResourcesList",{params:{keywords:this.keywords}}).then(({data:r})=>{this.resourceList=r.data,this.loading=!1})},changeResource(r){this.axios.post("/api/resource/saveOrUpdateResource",r).then(({data:l})=>{l.flag?(this.$notify.success({title:"\u6210\u529F",message:l.message}),this.listResources()):this.$notify.error({title:"\u5931\u8D25",message:l.message})})},openModel(r){r!=null?(this.moduleTitle="\u4FEE\u6539\u6A21\u5757",this.resourceForm=JSON.parse(JSON.stringify(r))):(this.moduleTitle="\u65B0\u589E\u6A21\u5757",this.resourceForm={}),this.addModule=!0},openEditResourceModel(r){if(r.url==null)return this.openModel(r),!1;this.resourceForm=JSON.parse(JSON.stringify(r)),this.resourceTitle="\u4FEE\u6539\u8D44\u6E90",this.addResource=!0},openAddResourceModel(r){this.resourceForm={},this.resourceForm.parentId=r.id,this.resourceTitle="\u65B0\u589E\u8D44\u6E90",this.addResource=!0},deleteResource(r){this.axios.delete("/api/resource/deleteResource/"+r).then(({data:l})=>{l.flag?(this.$notify.success({title:"\u6210\u529F",message:l.message}),this.listResources()):this.$notify.error({title:"\u5931\u8D25",message:l.message})})},addOrEditResource(){if(this.resourceForm.resourceName.trim()=="")return this.$message.error("\u8D44\u6E90\u540D\u4E0D\u80FD\u4E3A\u7A7A"),!1;this.axios.post("/api/resource/saveOrUpdateResource",this.resourceForm).then(({data:r})=>{r.flag?(this.$notify.success({title:"\u6210\u529F",message:r.message}),this.listResources()):this.$notify.error({title:"\u5931\u8D25",message:r.message}),this.addModule=!1,this.addResource=!1})}},computed:{tagType(){return function(r){switch(r){case"GET":return"";case"POST":return"success";case"PUT":return"warning";case"DELETE":return"danger"}}},dataFormat(){return function(r){return D(r,"YYYY-MM-DD")}}}},J={class:"title"},Y={class:"operation-container"},B={style:{"margin-left":"auto"}},G={class:"dialog-footer"},K={class:"dialog-footer"};function j(r,l,I,Q,s,a){const R=i("Plus"),d=i("el-icon"),u=i("el-button"),V=i("Search"),_=i("el-input"),m=i("el-table-column"),F=i("el-tag"),b=i("el-switch"),C=i("Timer"),M=i("Edit"),x=i("Delete"),E=i("el-popconfirm"),U=i("el-table"),f=i("el-form-item"),T=i("el-form"),k=i("el-dialog"),h=i("el-radio"),N=i("el-radio-group"),O=i("el-card"),S=z("loading");return g(),y(O,{class:"main-card"},{default:o(()=>[p("div",J,w(this.$route.name),1),p("div",Y,[e(u,{type:"primary",size:"small",onClick:l[0]||(l[0]=t=>a.openModel(null))},{default:o(()=>[e(d,null,{default:o(()=>[e(R)]),_:1}),n(" \u65B0\u589E\u6A21\u5757 ")]),_:1}),p("div",B,[e(_,{modelValue:s.keywords,"onUpdate:modelValue":l[1]||(l[1]=t=>s.keywords=t),size:"small",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D",style:{width:"200px"},onKeyup:P(a.listResources,["enter","native"])},{prefix:o(()=>[e(d,null,{default:o(()=>[e(V)]),_:1})]),_:1},8,["modelValue","onKeyup"]),e(u,{type:"primary",size:"small",style:{"margin-left":"1rem"},onClick:a.listResources},{prefix:o(()=>[e(d,null,{default:o(()=>[e(V)]),_:1})]),default:o(()=>[n(" \u641C\u7D22 ")]),_:1},8,["onClick"])])]),L((g(),y(U,{data:s.resourceList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:o(()=>[e(m,{prop:"resourceName",label:"\u8D44\u6E90\u540D",width:"220"}),e(m,{prop:"url",label:"\u8D44\u6E90\u8DEF\u5F84",width:"300"}),e(m,{prop:"requetMethod",label:"\u8BF7\u6C42\u65B9\u5F0F"},{default:o(t=>[t.row.requestMethod?(g(),y(F,{key:0,type:a.tagType(t.row.requestMethod)},{default:o(()=>[n(w(t.row.requestMethod),1)]),_:2},1032,["type"])):v("",!0)]),_:1}),e(m,{prop:"isAnonymous",label:"\u533F\u540D\u8BBF\u95EE",align:"center"},{default:o(t=>[e(b,{modelValue:t.row.isAnonymous,"onUpdate:modelValue":c=>t.row.isAnonymous=c,"active-color":"#13ce66","inactive-color":"#F4F4F5","active-value":1,"inactive-value":0,onChange:c=>a.changeResource(t.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(m,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"},{default:o(t=>[e(d,{style:{"margin-right":"5px"}},{default:o(()=>[e(C)]),_:1}),n(" "+w(a.dataFormat(t.row.createTime)),1)]),_:1}),e(m,{label:"\u64CD\u4F5C",align:"center",width:"200"},{default:o(t=>[t.row.children?(g(),y(u,{key:0,link:"",size:"small",type:"primary",onClick:c=>a.openAddResourceModel(t.row)},{default:o(()=>[e(d,null,{default:o(()=>[e(R)]),_:1}),n(" \u65B0\u589E ")]),_:2},1032,["onClick"])):v("",!0),e(u,{link:"",size:"small",type:"primary",onClick:c=>a.openEditResourceModel(t.row)},{default:o(()=>[e(d,null,{default:o(()=>[e(M)]),_:1}),n(" \u4FEE\u6539 ")]),_:2},1032,["onClick"]),e(E,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",style:{"margin-left":"10px"},onConfirm:c=>a.deleteResource(t.row.id)},{reference:o(()=>[e(u,{link:"",size:"small",type:"primary",slot:"reference"},{default:o(()=>[e(d,null,{default:o(()=>[e(x)]),_:1}),n(" \u5220\u9664 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[S,s.loading]]),e(k,{modelValue:s.addModule,"onUpdate:modelValue":l[4]||(l[4]=t=>s.addModule=t),width:"30%",title:s.moduleTitle},{footer:o(()=>[p("span",G,[e(u,{onClick:l[3]||(l[3]=t=>s.addModule=!1)},{default:o(()=>[n("\u53D6 \u6D88")]),_:1}),e(u,{type:"primary",onClick:a.addOrEditResource},{default:o(()=>[n(" \u786E \u5B9A ")]),_:1},8,["onClick"])])]),default:o(()=>[e(T,{"label-width":"80px",size:"small",model:s.resourceForm},{default:o(()=>[e(f,{label:"\u6A21\u5757\u540D"},{default:o(()=>[e(_,{modelValue:s.resourceForm.resourceName,"onUpdate:modelValue":l[2]||(l[2]=t=>s.resourceForm.resourceName=t),style:{width:"220px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(k,{modelValue:s.addResource,"onUpdate:modelValue":l[9]||(l[9]=t=>s.addResource=t),width:"30%",title:s.resourceTitle},{footer:o(()=>[p("span",K,[e(u,{onClick:l[8]||(l[8]=t=>s.addResource=!1)},{default:o(()=>[n("\u53D6 \u6D88")]),_:1}),e(u,{type:"primary",onClick:a.addOrEditResource},{default:o(()=>[n(" \u786E \u5B9A ")]),_:1},8,["onClick"])])]),default:o(()=>[e(T,{"label-width":"80px",size:"medium",model:s.resourceForm},{default:o(()=>[e(f,{label:"\u8D44\u6E90\u540D"},{default:o(()=>[e(_,{modelValue:s.resourceForm.resourceName,"onUpdate:modelValue":l[5]||(l[5]=t=>s.resourceForm.resourceName=t),style:{width:"220px"}},null,8,["modelValue"])]),_:1}),e(f,{label:"\u8D44\u6E90\u8DEF\u5F84"},{default:o(()=>[e(_,{modelValue:s.resourceForm.url,"onUpdate:modelValue":l[6]||(l[6]=t=>s.resourceForm.url=t),style:{width:"220px"}},null,8,["modelValue"])]),_:1}),e(f,{label:"\u8BF7\u6C42\u65B9\u5F0F"},{default:o(()=>[e(N,{modelValue:s.resourceForm.requestMethod,"onUpdate:modelValue":l[7]||(l[7]=t=>s.resourceForm.requestMethod=t)},{default:o(()=>[e(h,{label:"GET"},{default:o(()=>[n("GET")]),_:1}),e(h,{label:"POST"},{default:o(()=>[n("POST")]),_:1}),e(h,{label:"PUT"},{default:o(()=>[n("PUT")]),_:1}),e(h,{label:"DELETE"},{default:o(()=>[n("DELETE")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})}var Fe=q(A,[["render",j]]);export{Fe as default};
