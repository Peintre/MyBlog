import{p as O}from"./common.10683f1a.js";import{ag as o,aj as S,o as _,Q as y,R as i,a as r,W as h,X as t,a7 as $,S as E,V as d}from"./@vue.9e9a2d45.js";import{_ as T}from"./index.ae6b5db7.js";import"./dayjs.68f6f475.js";import"./@babel.1ce85722.js";import"./axios.cdba3bd7.js";import"./form-data.d1f94bc2.js";import"./vue-router.b11bef48.js";import"./vuex.029ab250.js";import"./vuex-persistedstate.fa252374.js";import"./nprogress.8c2c2e00.js";import"./vue-axios.516efde1.js";import"./element-plus.e856da41.js";import"./lodash-es.1d9717e1.js";import"./@vueuse.15af719d.js";import"./@element-plus.b2728cca.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.f14f28ca.js";import"./@kangc.b9a0ef8b.js";import"./vue.a84c3055.js";import"./markdown-it-emoji.952032df.js";import"./@vuepress.3e7afe62.js";import"./markdown-it-container.512a5043.js";import"./highlight.js.6e93349b.js";import"./codemirror.59d98cc1.js";const D={created(){this.listLinks()},data:function(){return{linkTitle:"",loading:!0,deleteFlag:!1,addOrEdit:!1,linkIdList:[],linkList:[],linkForm:{id:null,linkName:"",linkAvatar:"",linkIntro:"",linkAddress:""},keywords:null,current:1,size:10,count:0}},computed:{dataFormat(){return function(e){return O(e,"YYYY-MM-DD")}}},methods:{selectionChange(e){this.linkIdList=[],e.forEach(l=>{this.linkIdList.push(l.id)})},searchLinks(){this.current=1,this.listLinks()},sizeChange(e){this.size=e,this.listLinks()},currentChange(e){this.current=e,this.listLinks()},deleteLink(e){var l={};e==null?l.idList=this.linkIdList:l.idList=[e],this.axios.post("/api/friendLink/deleteLinks",l).then(({data:k})=>{k.flag?(this.$notify.success({title:"\u6210\u529F",message:k.message}),this.listLinks()):this.$notify.error({title:"\u5931\u8D25",message:k.message}),this.deleteFlag=!1})},openModel(e){e!=null?(this.linkForm=JSON.parse(JSON.stringify(e)),this.linkTitle="\u4FEE\u6539\u53CB\u94FE"):(this.linkForm.id=null,this.linkForm.linkName="",this.linkForm.linkAvatar="",this.linkForm.linkIntro="",this.linkForm.linkAddress="",this.linkTitle="\u6DFB\u52A0\u53CB\u94FE"),this.addOrEdit=!0},addOrEditCategory(){if(this.linkForm.linkName.trim()=="")return this.$message.error("\u53CB\u94FE\u540D\u4E0D\u80FD\u4E3A\u7A7A"),!1;if(this.linkForm.linkAvatar.trim()=="")return this.$message.error("\u53CB\u94FE\u5934\u50CF\u4E0D\u80FD\u4E3A\u7A7A"),!1;if(this.linkForm.linkIntro.trim()=="")return this.$message.error("\u53CB\u94FE\u4ECB\u7ECD\u4E0D\u80FD\u4E3A\u7A7A"),!1;if(this.linkForm.linkAddress.trim()=="")return this.$message.error("\u53CB\u94FE\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A"),!1;this.linkForm.id==null?this.axios.post("/api/friendLink/addLink",this.linkForm).then(({data:e})=>{e.flag?(this.$notify.success({title:"\u6210\u529F",message:e.message}),this.listLinks()):this.$notify.error({title:"\u5931\u8D25",message:e.message}),this.addOrEdit=!1}):this.axios.post("/api/friendLink/updateLink",this.linkForm).then(({data:e})=>{e.flag?(this.$notify.success({title:"\u6210\u529F",message:e.message}),this.listLinks()):this.$notify.error({title:"\u5931\u8D25",message:e.message}),this.addOrEdit=!1})},listLinks(){this.axios.get("/api/friendLink/getLinks",{params:{current:this.current,size:this.size,keywords:this.keywords}}).then(({data:e})=>{this.linkList=e.data.recordList,this.count=e.data.count,this.loading=!1})}}},U={class:"title"},M={class:"operation-container"},Y=r("span",null,"\u65B0\u589E",-1),B=r("span",null,"\u6279\u91CF\u5220\u9664",-1),K={style:{"margin-left":"auto"}},W=r("span",null,"\u641C\u7D22",-1),j=["src"],J={class:"dialog-title-container"},P=r("div",{style:{"font-size":"1rem"}},"\u662F\u5426\u5220\u9664\u9009\u4E2D\u9879\uFF1F",-1),Q={class:"dialog-title-container"};function R(e,l,k,X,q,s){const L=o("Plus"),u=o("el-icon"),a=o("el-button"),F=o("Delete"),g=o("Search"),p=o("el-input"),m=o("el-table-column"),C=o("Timer"),v=o("el-popconfirm"),w=o("el-table"),V=o("el-pagination"),b=o("Warning"),c=o("el-dialog"),f=o("el-form-item"),z=o("el-form"),A=o("el-card"),I=S("loading");return _(),y(A,{class:"main-card"},{default:i(()=>[r("div",U,h(this.$route.name),1),r("div",M,[t(a,{type:"primary",size:"default",onClick:l[0]||(l[0]=n=>s.openModel(null))},{default:i(()=>[t(u,null,{default:i(()=>[t(L)]),_:1}),Y]),_:1}),t(a,{type:"danger",size:"default",disabled:e.linkIdList.length==0,onClick:l[1]||(l[1]=n=>e.deleteFlag=!0)},{default:i(()=>[t(u,null,{default:i(()=>[t(F)]),_:1}),B]),_:1},8,["disabled"]),r("div",K,[t(p,{modelValue:e.keywords,"onUpdate:modelValue":l[2]||(l[2]=n=>e.keywords=n),size:"default",placeholder:"\u8BF7\u8F93\u5165\u53CB\u94FE\u540D",style:{width:"200px"},onKeyup:$(s.searchLinks,["enter","native"])},{prefix:i(()=>[t(u,null,{default:i(()=>[t(g)]),_:1})]),_:1},8,["modelValue","onKeyup"]),t(a,{type:"primary",size:"default",style:{"margin-left":"1rem"},onClick:s.searchLinks},{default:i(()=>[t(u,null,{default:i(()=>[t(g)]),_:1}),W]),_:1},8,["onClick"])])]),E((_(),y(w,{border:"",data:e.linkList,onSelectionChange:s.selectionChange},{default:i(()=>[t(m,{type:"selection",width:"35"}),t(m,{prop:"linkAvatar",label:"\u94FE\u63A5\u5934\u50CF",align:"center",width:"180"},{default:i(n=>[r("img",{src:n.row.linkAvatar,width:"40",height:"40"},null,8,j)]),_:1}),t(m,{prop:"linkName",label:"\u94FE\u63A5\u540D",align:"center"}),t(m,{prop:"linkAddress",label:"\u94FE\u63A5\u5730\u5740",align:"center"}),t(m,{prop:"linkIntro",label:"\u94FE\u63A5\u4ECB\u7ECD",align:"center"}),t(m,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:"140",align:"center"},{default:i(n=>[t(u,{style:{"margin-right":"5px"}},{default:i(()=>[t(C)]),_:1}),d(" "+h(s.dataFormat(n.row.createTime)),1)]),_:1}),t(m,{label:"\u64CD\u4F5C",align:"center",width:"160"},{default:i(n=>[t(a,{type:"primary",size:"small",onClick:N=>s.openModel(n.row)},{default:i(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),t(v,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",style:{"margin-left":"1rem"},onConfirm:N=>s.deleteLink(n.row.id)},{reference:i(()=>[t(a,{size:"small",type:"danger",slot:"reference"},{default:i(()=>[d(" \u5220\u9664 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[I,e.loading]]),t(V,{class:"pagination-container",background:"",onSizeChange:s.sizeChange,onCurrentChange:s.currentChange,"current-page":e.current,"page-size":e.size,total:e.count,"page-sizes":[10,20],layout:"total, sizes, prev, pager, next, jumper"},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),t(c,{modelValue:e.deleteFlag,"onUpdate:modelValue":l[5]||(l[5]=n=>e.deleteFlag=n),width:"30%"},{header:i(()=>[r("div",J,[t(u,{style:{color:"#ff9900"}},{default:i(()=>[t(b)]),_:1}),d("\u63D0\u793A ")])]),footer:i(()=>[t(a,{onClick:l[3]||(l[3]=n=>e.deleteFlag=!1)},{default:i(()=>[d("\u53D6 \u6D88")]),_:1}),t(a,{type:"primary",onClick:l[4]||(l[4]=n=>s.deleteLink(null))},{default:i(()=>[d(" \u786E \u5B9A ")]),_:1})]),default:i(()=>[P]),_:1},8,["modelValue"]),t(c,{modelValue:e.addOrEdit,"onUpdate:modelValue":l[11]||(l[11]=n=>e.addOrEdit=n),width:"30%"},{header:i(()=>[r("div",Q,h(e.linkTitle),1)]),footer:i(()=>[t(a,{onClick:l[10]||(l[10]=n=>e.addOrEdit=!1)},{default:i(()=>[d("\u53D6 \u6D88")]),_:1}),t(a,{type:"primary",onClick:s.addOrEditCategory},{default:i(()=>[d(" \u786E \u5B9A ")]),_:1},8,["onClick"])]),default:i(()=>[t(z,{"label-width":"80px",size:"default",model:e.linkForm},{default:i(()=>[t(f,{label:"\u94FE\u63A5\u540D"},{default:i(()=>[t(p,{style:{width:"250px"},modelValue:e.linkForm.linkName,"onUpdate:modelValue":l[6]||(l[6]=n=>e.linkForm.linkName=n)},null,8,["modelValue"])]),_:1}),t(f,{label:"\u94FE\u63A5\u5934\u50CF"},{default:i(()=>[t(p,{style:{width:"250px"},modelValue:e.linkForm.linkAvatar,"onUpdate:modelValue":l[7]||(l[7]=n=>e.linkForm.linkAvatar=n)},null,8,["modelValue"])]),_:1}),t(f,{label:"\u94FE\u63A5\u5730\u5740"},{default:i(()=>[t(p,{style:{width:"250px"},modelValue:e.linkForm.linkAddress,"onUpdate:modelValue":l[8]||(l[8]=n=>e.linkForm.linkAddress=n)},null,8,["modelValue"])]),_:1}),t(f,{label:"\u94FE\u63A5\u4ECB\u7ECD"},{default:i(()=>[t(p,{style:{width:"250px"},modelValue:e.linkForm.linkIntro,"onUpdate:modelValue":l[9]||(l[9]=n=>e.linkForm.linkIntro=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}var be=T(D,[["render",R]]);export{be as default};
