import{_ as z}from"./index.ae6b5db7.js";import{ag as i,aj as V,o as h,Q as c,R as o,a as n,W as m,X as s,V as d,U as w,S,c as A,a6 as N,F as $,b7 as B,b6 as U}from"./@vue.9e9a2d45.js";import"./axios.cdba3bd7.js";import"./form-data.d1f94bc2.js";import"./vue-router.b11bef48.js";import"./vuex.029ab250.js";import"./vuex-persistedstate.fa252374.js";import"./nprogress.8c2c2e00.js";import"./@babel.1ce85722.js";import"./vue-axios.516efde1.js";import"./element-plus.e856da41.js";import"./lodash-es.1d9717e1.js";import"./@vueuse.15af719d.js";import"./@element-plus.b2728cca.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.68f6f475.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.f14f28ca.js";import"./@kangc.b9a0ef8b.js";import"./vue.a84c3055.js";import"./markdown-it-emoji.952032df.js";import"./@vuepress.3e7afe62.js";import"./markdown-it-container.512a5043.js";import"./highlight.js.6e93349b.js";import"./codemirror.59d98cc1.js";const R={created(){this.listPhotos()},data:function(){return{loading:!0,batchDeletePhoto:!1,isIndeterminate:!1,checkAll:!1,photoList:[],photoIdList:[],selectPhotoIdList:[],current:1,size:18,count:0}},methods:{listPhotos(){this.axios.get("/api/photo/getPhotos",{params:{current:this.current,size:this.size,isDelete:1}}).then(({data:e})=>{this.photoList=e.data.recordList,this.count=e.data.count,this.loading=!1})},sizeChange(e){this.size=e,this.listPhotos()},currentChange(e){this.current=e,this.listPhotos()},updatePhotoDelete(){let e={};e.idList=this.selectPhotoIdList,this.axios.post("/api/photo/recoverPhotos",e).then(({data:t})=>{t.flag?(this.$notify.success({title:"\u6210\u529F",message:t.message}),this.listPhotos(),this.selectPhotoIdList=[]):this.$notify.error({title:"\u5931\u8D25",message:t.message})}),this.batchDeletePhoto=!1},deletePhotos(){let e={};e.idList=this.selectPhotoIdList,this.axios.post("/api/photo/deleteOkPhotos",e).then(({data:t})=>{t.flag?(this.$notify.success({title:"\u6210\u529F",message:t.message}),this.listPhotos(),this.selectPhotoIdList=[]):this.$notify.error({title:"\u5931\u8D25",message:t.message})}),this.batchDeletePhoto=!1},handleCheckAllChange(e){this.selectPhotoIdList=e?this.photoIdList:[],this.isIndeterminate=!1},handleCheckedPhotoChange(e){let t=e.length;this.checkAll=t===this.photoIdList.length,this.isIndeterminate=t>0&&t<this.photoIdList.length}},watch:{photoList(){this.photoIdList=[],this.photoList.forEach(e=>{this.photoIdList.push(e.id)})}}},p=e=>(B("data-v-719b6f7a"),e=e(),U(),e),E={class:"title"},F={class:"operation"},j={class:"all-check"},O={class:"check-count"},Q=p(()=>n("span",null,"\u6279\u91CF\u6062\u590D",-1)),T=p(()=>n("span",null,"\u6279\u91CF\u5220\u9664",-1)),W={class:"photo-list"},X={class:"photo-item"},q={class:"photo-name"},G=p(()=>n("div",{class:"dialog-title-container"},[n("i",{class:"el-icon-warning",style:{color:"#ff9900"}}),d("\u63D0\u793A ")],-1)),H=p(()=>n("div",{style:{"font-size":"1rem"}},"\u662F\u5426\u5220\u9664\u9009\u4E2D\u7167\u7247\uFF1F",-1));function J(e,t,K,M,Y,a){const u=i("el-checkbox"),g=i("RefreshLeft"),_=i("el-icon"),r=i("el-button"),f=i("Delete",!0),P=i("el-empty"),C=i("el-image"),L=i("el-col"),k=i("el-row"),v=i("el-checkbox-group"),I=i("el-pagination"),b=i("el-dialog"),y=i("el-card"),D=V("loading");return h(),c(y,{class:"main-card my-deletePhoto-card"},{default:o(()=>[n("div",E,m(this.$route.name),1),n("div",F,[n("div",j,[s(u,{indeterminate:e.isIndeterminate,modelValue:e.checkAll,"onUpdate:modelValue":t[0]||(t[0]=l=>e.checkAll=l),onChange:a.handleCheckAllChange},{default:o(()=>[d(" \u5168\u9009 ")]),_:1},8,["indeterminate","modelValue","onChange"]),n("div",O,"\u5DF2\u9009\u62E9"+m(e.selectPhotoIdList.length)+"\u5F20",1)]),s(r,{type:"success",onClick:a.updatePhotoDelete,disabled:e.selectPhotoIdList.length==0,size:"default"},{default:o(()=>[s(_,null,{default:o(()=>[s(g)]),_:1}),Q]),_:1},8,["onClick","disabled"]),s(r,{type:"danger",onClick:t[1]||(t[1]=l=>e.batchDeletePhoto=!0),disabled:e.selectPhotoIdList.length==0,size:"default"},{default:o(()=>[s(_,null,{default:o(()=>[s(f)]),_:1}),T]),_:1},8,["disabled"])]),n("div",W,[e.photoList.length==0?(h(),c(P,{key:0,description:"\u6682\u65E0\u7167\u7247"})):w("",!0),s(v,{modelValue:e.selectPhotoIdList,"onUpdate:modelValue":t[2]||(t[2]=l=>e.selectPhotoIdList=l),onChange:a.handleCheckedPhotoChange},{default:o(()=>[S((h(),c(k,{class:"photo-container",gutter:20},{default:o(()=>[(h(!0),A($,null,N(e.photoList,l=>(h(),c(L,{md:4,key:l.id},{default:o(()=>[s(u,{label:l.id},{default:o(()=>[n("div",X,[s(C,{fit:"cover",class:"photo-img",src:l.photoSrc,"preview-photoSrc-list":e.photoList},null,8,["src","preview-photoSrc-list"]),n("div",q,m(l.photoName),1)])]),_:2},1032,["label"])]),_:2},1024))),128))]),_:1})),[[D,e.loading]])]),_:1},8,["modelValue","onChange"])]),s(I,{"hide-on-single-page":!0,class:"pagination-container",onSizeChange:a.sizeChange,onCurrentChange:a.currentChange,"current-page":e.current,"page-size":e.size,total:e.count,layout:"prev, pager, next"},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),s(b,{modelValue:e.batchDeletePhoto,"onUpdate:modelValue":t[4]||(t[4]=l=>e.batchDeletePhoto=l),width:"30%"},{header:o(()=>[G]),footer:o(()=>[s(r,{onClick:t[3]||(t[3]=l=>e.batchDeletePhoto=!1)},{default:o(()=>[d("\u53D6 \u6D88")]),_:1}),s(r,{type:"primary",onClick:a.deletePhotos},{default:o(()=>[d(" \u786E \u5B9A ")]),_:1},8,["onClick"])]),default:o(()=>[H]),_:1},8,["modelValue"])]),_:1})}var ze=z(R,[["render",J],["__scopeId","data-v-719b6f7a"]]);export{ze as default};
