import{p as S}from"./common.10683f1a.js";import{ag as r,aj as E,o as h,Q as _,R as o,a as n,W as p,X as t,a7 as T,S as $,V as d}from"./@vue.9e9a2d45.js";import{_ as I}from"./index.ae6b5db7.js";import"./dayjs.68f6f475.js";import"./@babel.1ce85722.js";import"./axios.cdba3bd7.js";import"./form-data.d1f94bc2.js";import"./vue-router.b11bef48.js";import"./vuex.029ab250.js";import"./vuex-persistedstate.fa252374.js";import"./nprogress.8c2c2e00.js";import"./vue-axios.516efde1.js";import"./element-plus.e856da41.js";import"./lodash-es.1d9717e1.js";import"./@vueuse.15af719d.js";import"./@element-plus.b2728cca.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.f14f28ca.js";import"./@kangc.b9a0ef8b.js";import"./vue.a84c3055.js";import"./markdown-it-emoji.952032df.js";import"./@vuepress.3e7afe62.js";import"./markdown-it-container.512a5043.js";import"./highlight.js.6e93349b.js";import"./codemirror.59d98cc1.js";const M={created(){this.listCategories()},data:function(){return{categoryTitle:"",isDelete:!1,loading:!0,addOrEdit:!1,keywords:null,categoryIdList:[],categoryList:[],categoryForm:{id:null,categoryName:""},current:1,size:10,count:0}},computed:{dataFormat(){return function(e){return S(e,"YYYY-MM-DD")}}},methods:{selectionChange(e){this.categoryIdList=[],e.forEach(i=>{this.categoryIdList.push(i.id)})},searchCategories(){this.current=1,this.listCategories()},sizeChange(e){this.size=e,this.listCategories()},currentChange(e){this.current=e,this.listCategories()},deleteCategory(e){var i={};e==null?i.idList=this.categoryIdList:i.idList=[e],this.axios.post("/api/category/deleteCategories",i).then(({data:c})=>{c.flag?(this.$notify.success({title:"\u6210\u529F",message:c.message}),this.listCategories()):this.$notify.error({title:"\u5931\u8D25",message:c.message}),this.isDelete=!1})},listCategories(){this.axios.get("/api/category/getCategories",{params:{current:this.current,size:this.size,keywords:this.keywords}}).then(({data:e})=>{this.categoryList=e.data.recordList,this.count=e.data.count,this.loading=!1})},openModel(e){e!=null?(this.categoryForm=JSON.parse(JSON.stringify(e)),this.categoryTitle="\u4FEE\u6539\u5206\u7C7B"):(this.categoryForm.id=null,this.categoryForm.categoryName="",this.categoryTitle="\u6DFB\u52A0\u5206\u7C7B"),this.addOrEdit=!0},addOrEditCategory(){if(this.categoryForm.categoryName.trim()=="")return this.$message.error("\u5206\u7C7B\u540D\u4E0D\u80FD\u4E3A\u7A7A"),!1;this.categoryForm.id!=null?this.axios.post("/api/category/upDateCategory",this.categoryForm).then(({data:e})=>{e.flag?(this.$notify.success({title:"\u6210\u529F",message:e.message}),this.listCategories()):this.$notify.error({title:"\u5931\u8D25",message:e.message}),this.addOrEdit=!1}):this.axios.post("/api/category/addCategory",this.categoryForm).then(({data:e})=>{e.flag?(this.$notify.success({title:"\u6210\u529F",message:e.message}),this.listCategories()):this.$notify.error({title:"\u5931\u8D25",message:e.message}),this.addOrEdit=!1})}}},U={class:"title"},Y={class:"operation-container"},B=n("span",null,"\u65B0\u589E",-1),K=n("span",null,"\u6279\u91CF\u5220\u9664",-1),W={style:{"margin-left":"auto"}},j=n("span",null,"\u641C\u7D22",-1),J={class:"dialog-title-container"},P=n("div",{style:{"font-size":"1rem"}},"\u662F\u5426\u5220\u9664\u9009\u4E2D\u9879\uFF1F",-1),Q={class:"dialog-title-container"};function R(e,i,c,X,q,s){const C=r("Plus"),m=r("el-icon"),l=r("el-button"),v=r("Delete"),u=r("Search"),f=r("el-input"),g=r("el-table-column"),z=r("Timer"),k=r("el-popconfirm"),w=r("el-table"),b=r("el-pagination"),V=r("Warning"),y=r("el-dialog"),D=r("el-form-item"),F=r("el-form"),L=r("el-card"),N=E("loading");return h(),_(L,{class:"main-card"},{default:o(()=>[n("div",U,p(this.$route.name),1),n("div",Y,[t(l,{type:"primary",size:"default",onClick:i[0]||(i[0]=a=>s.openModel(null))},{default:o(()=>[t(m,null,{default:o(()=>[t(C)]),_:1}),B]),_:1}),t(l,{type:"danger",size:"default",disabled:this.categoryIdList.length==0,onClick:i[1]||(i[1]=a=>e.isDelete=!0)},{default:o(()=>[t(m,null,{default:o(()=>[t(v)]),_:1}),K]),_:1},8,["disabled"]),n("div",W,[t(f,{modelValue:e.keywords,"onUpdate:modelValue":i[2]||(i[2]=a=>e.keywords=a),size:"default",placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D",style:{width:"200px"},onKeyup:T(s.searchCategories,["enter","native"])},{prefix:o(()=>[t(m,null,{default:o(()=>[t(u)]),_:1})]),_:1},8,["modelValue","onKeyup"]),t(l,{type:"primary",size:"default",style:{"margin-left":"1rem"},onClick:s.searchCategories},{default:o(()=>[t(m,null,{default:o(()=>[t(u)]),_:1}),j]),_:1},8,["onClick"])])]),$((h(),_(w,{border:"",data:e.categoryList,onSelectionChange:s.selectionChange},{default:o(()=>[t(g,{type:"selection",width:"35"}),t(g,{prop:"categoryName",label:"\u5206\u7C7B\u540D",align:"center"}),t(g,{prop:"articleCount",label:"\u6587\u7AE0\u91CF",align:"center"}),t(g,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"},{default:o(a=>[t(m,{style:{"margin-right":"5px"}},{default:o(()=>[t(z)]),_:1}),d(" "+p(s.dataFormat(a.row.createTime)),1)]),_:1}),t(g,{label:"\u64CD\u4F5C",width:"160",align:"center"},{default:o(a=>[t(l,{type:"primary",size:"small",onClick:O=>s.openModel(a.row)},{default:o(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),t(k,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",style:{"margin-left":"1rem"},onConfirm:O=>s.deleteCategory(a.row.id)},{reference:o(()=>[t(l,{size:"small",type:"danger",slot:"reference"},{default:o(()=>[d(" \u5220\u9664 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[N,e.loading]]),t(b,{class:"pagination-container",background:"",onSizeChange:s.sizeChange,onCurrentChange:s.currentChange,"current-page":e.current,"page-size":e.size,total:e.count,"page-sizes":[10,20],layout:"total, sizes, prev, pager, next, jumper"},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),t(y,{modelValue:e.isDelete,"onUpdate:modelValue":i[5]||(i[5]=a=>e.isDelete=a),width:"30%"},{header:o(()=>[n("div",J,[t(m,{style:{color:"#ff9900"}},{default:o(()=>[t(V)]),_:1}),d(" \u63D0\u793A ")])]),footer:o(()=>[t(l,{onClick:i[3]||(i[3]=a=>e.isDelete=!1)},{default:o(()=>[d("\u53D6 \u6D88")]),_:1}),t(l,{type:"primary",onClick:i[4]||(i[4]=a=>s.deleteCategory(null))},{default:o(()=>[d(" \u786E \u5B9A ")]),_:1})]),default:o(()=>[P]),_:1},8,["modelValue"]),t(y,{modelValue:e.addOrEdit,"onUpdate:modelValue":i[8]||(i[8]=a=>e.addOrEdit=a),width:"30%"},{header:o(()=>[n("div",Q,p(e.categoryTitle),1)]),footer:o(()=>[t(l,{onClick:i[7]||(i[7]=a=>e.addOrEdit=!1)},{default:o(()=>[d("\u53D6 \u6D88")]),_:1}),t(l,{type:"primary",onClick:s.addOrEditCategory},{default:o(()=>[d(" \u786E \u5B9A ")]),_:1},8,["onClick"])]),default:o(()=>[t(F,{"label-width":"80px",size:"default",model:e.categoryForm},{default:o(()=>[t(D,{label:"\u5206\u7C7B\u540D"},{default:o(()=>[t(f,{modelValue:e.categoryForm.categoryName,"onUpdate:modelValue":i[6]||(i[6]=a=>e.categoryForm.categoryName=a),style:{width:"220px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}var Ve=I(M,[["render",R]]);export{Ve as default};
