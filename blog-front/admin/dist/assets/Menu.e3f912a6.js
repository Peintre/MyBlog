import{p as J}from"./common.10683f1a.js";import{ag as i,aj as E,o as f,Q as y,R as l,a as _,W as w,X as e,V as a,a7 as K,S as F,L as b,U as C,c as P,a6 as j,F as Q,Y as R}from"./@vue.9e9a2d45.js";import{_ as W}from"./index.ae6b5db7.js";import"./dayjs.68f6f475.js";import"./@babel.1ce85722.js";import"./axios.cdba3bd7.js";import"./form-data.d1f94bc2.js";import"./vue-router.b11bef48.js";import"./vuex.029ab250.js";import"./vuex-persistedstate.fa252374.js";import"./nprogress.8c2c2e00.js";import"./vue-axios.516efde1.js";import"./element-plus.e856da41.js";import"./lodash-es.1d9717e1.js";import"./@vueuse.15af719d.js";import"./@element-plus.b2728cca.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.f14f28ca.js";import"./@kangc.b9a0ef8b.js";import"./vue.a84c3055.js";import"./markdown-it-emoji.952032df.js";import"./@vuepress.3e7afe62.js";import"./markdown-it-container.512a5043.js";import"./highlight.js.6e93349b.js";import"./codemirror.59d98cc1.js";const X={created(){this.listMenus()},data(){return{menuTitle:"",keywords:"",loading:!0,addMenu:!1,isCatalog:!0,show:!0,menuList:[],menuForm:{id:null,name:"",icon:"",component:"",path:"",orderNum:1,parentId:null,isHidden:0},iconList:["el-icon-myshouye","el-icon-myfabiaowenzhang","el-icon-myyonghuliebiao","el-icon-myxiaoxi","el-icon-myliuyan","el-icon-myshouye","el-icon-myfabiaowenzhang","el-icon-myyonghuliebiao","el-icon-myxiaoxi","el-icon-myliuyan"]}},computed:{dataFormat(){return function(r){return J(r,"YYYY-MM-DD")}}},methods:{listMenus(){this.axios.get("/api/menu/getMenusList",{params:{keywords:this.keywords}}).then(({data:r})=>{this.menuList=r.data,this.loading=!1})},openModel(r,t){if(r)switch(this.show=!1,this.isCatalog=!1,t){case 1:this.menuTitle="\u65B0\u589E\u5B50\u83DC\u5355",this.menuForm={id:null,name:"",icon:"",component:"",path:"",orderNum:1,parentId:null,isHidden:0},this.menuForm.parentId=JSON.parse(JSON.stringify(r.id));break;case 2:this.menuTitle="\u7F16\u8F91\u83DC\u5355",this.menuForm=JSON.parse(JSON.stringify(r));break}else this.show=!0,this.menuTitle="\u65B0\u589E\u83DC\u5355",this.menuForm={id:null,name:"",icon:"",component:"Layout",path:"",orderNum:1,parentId:null,isHidden:0};this.addMenu=!0},checkIcon(r){this.menuForm.icon=r},saveOrUpdateMenu(){if(this.menuForm.name.trim()=="")return this.$message.error("\u83DC\u5355\u540D\u4E0D\u80FD\u4E3A\u7A7A"),!1;if(this.menuForm.icon.trim()=="")return this.$message.error("\u83DC\u5355icon\u4E0D\u80FD\u4E3A\u7A7A"),!1;if(this.menuForm.component.trim()=="")return this.$message.error("\u83DC\u5355\u7EC4\u4EF6\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A"),!1;if(this.menuForm.path.trim()=="")return this.$message.error("\u83DC\u5355\u8BBF\u95EE\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A"),!1;this.axios.post("/api/menu/saveOrUpdateMenu",this.menuForm).then(({data:r})=>{r.flag?(this.$notify.success({title:"\u6210\u529F",message:"\u64CD\u4F5C\u6210\u529F"}),this.listMenus()):this.$notify.error({title:"\u5931\u8D25",message:"\u64CD\u4F5C\u5931\u8D25"}),this.addMenu=!1})},deleteMenu(r){this.axios.delete("/api/menu/deleteMenu/"+r).then(({data:t})=>{t.flag?(this.$notify.success({title:"\u6210\u529F",message:"\u5220\u9664\u6210\u529F"}),this.listMenus()):this.$notify.error({title:"\u5931\u8D25",message:t.message})})}}},q={class:"title"},A={class:"operation-container"},G={style:{"margin-left":"auto"}},Z=["onClick"];function $(r,t,ee,le,n,m){const V=i("Plus"),u=i("el-icon"),d=i("el-button"),v=i("Search"),h=i("el-input"),s=i("el-table-column"),M=i("el-switch"),x=i("Timer"),U=i("Edit"),N=i("Delete"),z=i("el-popconfirm"),S=i("el-table"),g=i("el-radio"),k=i("el-radio-group"),p=i("el-form-item"),T=i("el-col"),D=i("el-row"),L=i("el-popover"),H=i("el-input-number"),I=i("el-form"),O=i("el-dialog"),Y=i("el-card"),B=E("loading");return f(),y(Y,{class:"main-card"},{default:l(()=>[_("div",q,w(this.$route.name),1),_("div",A,[e(d,{type:"primary",size:"small",onClick:t[0]||(t[0]=o=>m.openModel(null))},{default:l(()=>[e(u,null,{default:l(()=>[e(V)]),_:1}),a("\u65B0\u589E\u83DC\u5355 ")]),_:1}),_("div",G,[e(h,{modelValue:n.keywords,"onUpdate:modelValue":t[1]||(t[1]=o=>n.keywords=o),size:"small",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D",style:{width:"200px"},onKeyup:K(m.listMenus,["enter","native"])},{prefix:l(()=>[e(u,null,{default:l(()=>[e(v)]),_:1})]),_:1},8,["modelValue","onKeyup"]),e(d,{type:"primary",size:"small",style:{"margin-left":"1rem"},onClick:m.listMenus},{default:l(()=>[e(u,null,{default:l(()=>[e(v)]),_:1}),a("\u641C\u7D22 ")]),_:1},8,["onClick"])])]),F((f(),y(S,{data:n.menuList,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:l(()=>[e(s,{prop:"name",label:"\u83DC\u5355\u540D\u79F0",width:"140"}),e(s,{prop:"icon",align:"center",label:"\u56FE\u6807",width:"100"},{default:l(o=>[_("i",{class:b("iconfont "+o.row.icon)},null,2)]),_:1}),e(s,{prop:"orderNum",align:"center",label:"\u6392\u5E8F",width:"100"}),e(s,{prop:"path",label:"\u8BBF\u95EE\u8DEF\u5F84"}),e(s,{prop:"component",label:"\u7EC4\u4EF6\u8DEF\u5F84"}),e(s,{prop:"isHidden",label:"\u9690\u85CF",align:"center",width:"80"},{default:l(o=>[e(M,{modelValue:o.row.isHidden,"onUpdate:modelValue":c=>o.row.isHidden=c,"active-color":"#13ce66","inactive-color":"#F4F4F5","active-value":1,"inactive-value":0,onChange:c=>r.changeDisable(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(s,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center",width:"150"},{default:l(o=>[e(u,{style:{"margin-right":"5px"}},{default:l(()=>[e(x)]),_:1}),a(" "+w(m.dataFormat(o.row.createTime)),1)]),_:1}),e(s,{label:"\u64CD\u4F5C",align:"center",width:"250"},{default:l(o=>[o.row.children?(f(),y(d,{key:0,link:"",type:"primary",size:"small",onClick:c=>m.openModel(o.row,1)},{default:l(()=>[e(u,null,{default:l(()=>[e(V)]),_:1}),a(" \u65B0\u589E ")]),_:2},1032,["onClick"])):C("",!0),e(d,{link:"",type:"primary",size:"small",onClick:c=>m.openModel(o.row,2)},{default:l(()=>[e(u,null,{default:l(()=>[e(U)]),_:1}),a(" \u4FEE\u6539 ")]),_:2},1032,["onClick"]),e(z,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",style:{"margin-left":"10px"},onConfirm:c=>m.deleteMenu(o.row.id)},{reference:l(()=>[e(d,{size:"small",link:"",type:"primary",slot:"reference"},{default:l(()=>[e(u,null,{default:l(()=>[e(N)]),_:1}),a(" \u5220\u9664 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[B,n.loading]]),e(O,{modelValue:n.addMenu,"onUpdate:modelValue":t[10]||(t[10]=o=>n.addMenu=o),width:"30%",top:"12vh",title:n.menuTitle},{footer:l(()=>[e(d,{onClick:t[9]||(t[9]=o=>n.addMenu=!1)},{default:l(()=>[a("\u53D6 \u6D88")]),_:1}),e(d,{type:"primary",onClick:m.saveOrUpdateMenu},{default:l(()=>[a(" \u786E \u5B9A ")]),_:1},8,["onClick"])]),default:l(()=>[e(I,{"label-width":"80px",size:"small",model:n.menuForm},{default:l(()=>[n.show?(f(),y(p,{key:0,label:"\u83DC\u5355\u7C7B\u578B"},{default:l(()=>[e(k,{modelValue:n.isCatalog,"onUpdate:modelValue":t[2]||(t[2]=o=>n.isCatalog=o)},{default:l(()=>[e(g,{label:!0},{default:l(()=>[a("\u76EE\u5F55")]),_:1}),e(g,{label:!1},{default:l(()=>[a("\u4E00\u7EA7\u83DC\u5355")]),_:1})]),_:1},8,["modelValue"])]),_:1})):C("",!0),e(p,{label:"\u83DC\u5355\u540D\u79F0"},{default:l(()=>[e(h,{modelValue:n.menuForm.name,"onUpdate:modelValue":t[3]||(t[3]=o=>n.menuForm.name=o),style:{width:"220px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"\u83DC\u5355\u56FE\u6807"},{default:l(()=>[e(L,{placement:"bottom-start",width:"300",trigger:"click"},{reference:l(()=>[e(h,{modelValue:n.menuForm.icon,"onUpdate:modelValue":t[4]||(t[4]=o=>n.menuForm.icon=o),style:{width:"220px"}},{prefix:l(()=>[_("i",{class:b("iconfont "+n.menuForm.icon)},null,2)]),_:1},8,["modelValue"])]),default:l(()=>[e(D,null,{default:l(()=>[(f(!0),P(Q,null,j(n.iconList,(o,c)=>(f(),y(T,{key:c,md:12,gutter:10},{default:l(()=>[_("div",{class:"icon-item",onClick:oe=>m.checkIcon(o)},[_("i",{class:b("iconfont "+o)},null,2),a(" "+w(o),1)],8,Z)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),F(e(p,{label:"\u7EC4\u4EF6\u8DEF\u5F84"},{default:l(()=>[e(h,{modelValue:n.menuForm.component,"onUpdate:modelValue":t[5]||(t[5]=o=>n.menuForm.component=o),style:{width:"220px"}},null,8,["modelValue"])]),_:1},512),[[R,!n.isCatalog]]),e(p,{label:"\u8BBF\u95EE\u8DEF\u5F84"},{default:l(()=>[e(h,{modelValue:n.menuForm.path,"onUpdate:modelValue":t[6]||(t[6]=o=>n.menuForm.path=o),style:{width:"220px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"\u663E\u793A\u6392\u5E8F"},{default:l(()=>[e(H,{modelValue:n.menuForm.orderNum,"onUpdate:modelValue":t[7]||(t[7]=o=>n.menuForm.orderNum=o),"controls-position":"right",min:1,max:10},null,8,["modelValue"])]),_:1}),e(p,{label:"\u663E\u793A\u72B6\u6001"},{default:l(()=>[e(k,{modelValue:n.menuForm.isHidden,"onUpdate:modelValue":t[8]||(t[8]=o=>n.menuForm.isHidden=o)},{default:l(()=>[e(g,{label:0},{default:l(()=>[a("\u663E\u793A")]),_:1}),e(g,{label:1},{default:l(()=>[a("\u9690\u85CF")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1})}var De=W(X,[["render",$],["__scopeId","data-v-361f9482"]]);export{De as default};
